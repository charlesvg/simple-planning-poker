
<textarea cols="100" rows="30" id="output">

</textarea>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"
        integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
<script>
    var isSSL = window.location.protocol === 'https:';
    var exampleSocket = new WebSocket((isSSL ? "wss://" : "ws://") + window.location.host, "echo-protocol");
    exampleSocket.onopen = function (event) {
        console.log('open');
        // exampleSocket.send("Here's some text that the server is urgently awaiting!");
    };
    exampleSocket.onmessage = function (event) {
        $('#output').append(document.createTextNode(event.data + '\n'));
        var psconsole = $('#output');
        if (psconsole.length) {
            psconsole.scrollTop(psconsole[0].scrollHeight - psconsole.height());
        }

    }

    /*

    var piSocket = new WebSocket((isSSL ? "wss://" : "ws://") + window.location.host , "readpi-protocol");
    piSocket.onopen = function (event) {
        console.log('open');
    };
    piSocket.onmessage = function (event) {
        console.log('piSocket', event);
    }
    piSocket.send('91.180.11.150');


    piSocket.onmessage = function (event) {
        console.log('piSocket', atob(JSON.parse(event.data).utf8Data));
    }

    */


</script>